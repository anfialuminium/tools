<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>הזנת מחירים</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 600px;
      margin: 0 auto;
      background: #f5f5f5;
    }
    h2 {
      margin-bottom: 20px;
    }
    .product-row {
      background: white;
      padding: 12px;
      border-radius: 6px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
    }
    .product-row label {
      display: block;
      font-weight: bold;
      margin-bottom: 6px;
    }
    .product-row input {
      width: 160px;
      padding: 6px;
    }
    button {
      margin-top: 20px;
      padding: 10px 15px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h2>הזנת מחירים למוצרים</h2>

<form id="priceForm">
  <!-- הרשימה נוצרת דינמית -->
</form>

<button onclick="submitPrices()">שמור מחירים</button>

<script>
const products = [
  "גלגל 7000 מתכת בודד",
  "גלגל 7000 מתכת כפול",
  "גלגל 7000 פלסטיק",
  "גלגל 7000 פלסטיק כפול",
  "גלגל 7300 פלסטיק",
  "גלגל פלסטיק לחלון הזזה",
  "חצי ידית 6 ברגים",
  "חצי ידית כבדה 4 ברגים",
  "מברשת צר גבוה",
  "מברשת צר נמוך",
  "מברשת רחב גבוה",
  "מברשת רחב נמוך",
  "רשת בעלי חיים",
  "רשת גלילה",
  "רשת פיברגלס",
  "רשת שקופה",
  "רשת שקופה פוליפרופילן"
];

// מוצרים שהם רשת – מחיר למטר
const meshProducts = products.filter(p => p.startsWith("רשת"));

const form = document.getElementById("priceForm");

products.forEach(product => {
  const div = document.createElement("div");
  div.className = "product-row";
  
  div.innerHTML = `
    <label>${product}</label>
    <input 
      type="number" 
      step="0.01" 
      placeholder="${meshProducts.includes(product) ? 'מחיר למטר' : 'מחיר'}" 
      data-product="${product}"
    >
  `;
  
  form.appendChild(div);
});

function submitPrices() {
  const inputs = document.querySelectorAll("input[data-product]");
  const data = [];

  inputs.forEach(i => {
    const price = i.value.trim();
    if (price !== "") {
      data.push({
        product: i.dataset.product,
        price: price,
        type: meshProducts.includes(i.dataset.product) ? "per_meter" : "unit"
      });
    }
  });

  fetch("YOUR_WEBAPP_URL", {
    method: "POST",
    contentType: "application/json",
    body: JSON.stringify(data)
  })
  .then(r => r.text())
  .then(res => {
    alert("הנתונים נשמרו בהצלחה");
  })
  .catch(err => alert("שגיאה בשמירה"));
}
</script>

</body>
</html>
